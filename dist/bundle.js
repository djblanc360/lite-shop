(()=>{var e={867:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".carousel-item{box-sizing:border-box;padding:10px;flex-shrink:0}\n",""]);const i=a},383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".carousel{display:flex;transition:transform 0.3s ease-in-out;position:relative;overflow:hidden;width:100%}.carousel .prev,.carousel .next{position:absolute;top:50%;transform:translateY(-50%);background-color:rgba(0,0,0,0.5);border:none;color:white;padding:10px;cursor:pointer;z-index:1}.carousel .prev{left:10px}.carousel .next{right:10px}\n",""]);const i=a},141:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".collection{display:flex;flex-wrap:wrap;justify-content:center;margin:0 auto;max-width:1200px;padding:0 20px}.collection__title{font-size:24px;margin-bottom:20px}.collection__products{display:flex;flex-wrap:wrap;gap:20px}\n",""]);const i=a},432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".flex-box{display:flex;flex-wrap:wrap;justify-content:space-between;padding:1rem;margin:0 auto;max-width:1200px;box-sizing:border-box}.flex-box>*{flex:1 1 calc(33.333% - 2rem);margin:1rem;box-sizing:border-box}@media (max-width: 900px){.flex-box>*{flex:1 1 calc(50% - 2rem)}}@media (max-width: 600px){.flex-box>*{flex:1 1 100%}}\n",""]);const i=a},201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".flex-layout{display:flex;flex-wrap:wrap;justify-content:space-between;padding:1rem;margin:0 auto;max-width:1200px;box-sizing:border-box}.flex-layout>*{flex:1 1 calc(33.333% - 2rem);margin:1rem;box-sizing:border-box}@media (max-width: 900px){.flex-layout>*{flex:1 1 calc(50% - 2rem)}}@media (max-width: 600px){.flex-layout>*{flex:1 1 100%}}\n",""]);const i=a},947:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,"form{display:flex;flex-direction:column}label{margin-bottom:10px}input,textarea{margin-top:5px;padding:5px;width:100%;box-sizing:border-box}button{padding:10px;background-color:#333;color:white;border:none;cursor:pointer}button:hover{background-color:#555}\n",""]);const i=a},665:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".grid-item{background-color:#fff;border:1px solid #ddd;padding:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}\n",""]);const i=a},505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".grid{display:grid;gap:20px;grid-template-columns:repeat(1, 1fr)}@media (min-width: 640px){.grid{grid-template-columns:repeat(2, 1fr)}}@media (min-width: 768px){.grid{grid-template-columns:repeat(3, 1fr)}}@media (min-width: 1024px){.grid{grid-template-columns:repeat(4, 1fr)}}@media (min-width: 1280px){.grid{grid-template-columns:repeat(5, 1fr)}}\n",""]);const i=a},678:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,"header{display:flex;justify-content:space-between;align-items:center;padding:20px;background-color:#333;color:#fff}header h1{cursor:pointer;margin:0}header a{color:#fff;text-decoration:none;cursor:pointer}header a:hover{text-decoration:underline}header nav a{margin-left:20px;cursor:pointer}\n",""]);const i=a},282:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center}.modal.open{display:flex}.modal .content{background:#fff;padding:20px;border-radius:8px;max-width:90%;max-height:90%;overflow-y:auto}\n",""]);const i=a},118:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".product-item h3{font-size:1.5rem}.product-item p{font-size:1.2rem}.product-item img{width:150px;height:150px}\n",""]);const i=a},188:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".product{display:flex;flex-wrap:wrap}@media screen and (max-width: 640px){.product{flex-direction:column}}.product .media-grid{width:50%}@media screen and (max-width: 640px){.product .media-grid{display:none}}.product .media-grid img{width:100%;height:auto}.product .product-details{flex:1;padding:20px}@media screen and (max-width: 640px){.product .product-details{margin-bottom:20px}}.product .main-image{display:none}@media screen and (max-width: 640px){.product .main-image{display:block;margin-bottom:20px;width:100%;height:auto}}\n",""]);const i=a},543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([e.id,".sidedrawer{position:fixed;right:0;top:0;width:300px;height:100%;background:white;box-shadow:-2px 0 5px rgba(0,0,0,0.5);transform:translateX(100%);transition:transform 0.3s ease-in-out;z-index:1001;padding:20px}.sidedrawer.open{transform:translateX(0)}.cart-item{display:flex;padding:10px 0;border-bottom:1px solid #ccc}.cart-item .thumbnail{width:100px;height:100px;margin-right:10px}.cart-item .info{display:flex;flex-direction:column;flex:1}.cart-item .info .header{display:flex;justify-content:space-between;align-items:center}.cart-item .info .header .name{font-weight:bold}.cart-item .info .header .remove{background:none;border:none;font-size:20px;cursor:pointer;color:#000}.cart-item .info .category,.cart-item .info .price{margin:5px 0}.cart-item .info .quantity{display:flex;align-items:center}.cart-item .info .quantity button.quantity{background:none;border:1px solid #ccc;padding:0 5px;cursor:pointer}.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);opacity:0;transition:opacity 0.3s ease-in-out;z-index:1000;pointer-events:none}.overlay.open{opacity:1;pointer-events:all}button.close{background:none;border:none;font-size:24px;cursor:pointer;position:absolute;top:10px;right:10px}\n",""]);const i=a},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(a[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);o&&a[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},63:(e,t,n)=>{var o=n(867);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},723:(e,t,n)=>{var o=n(383);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},769:(e,t,n)=>{var o=n(141);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},900:(e,t,n)=>{var o=n(432);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},925:(e,t,n)=>{var o=n(201);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},663:(e,t,n)=>{var o=n(947);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},661:(e,t,n)=>{var o=n(665);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},733:(e,t,n)=>{var o=n(505);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},842:(e,t,n)=>{var o=n(678);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},582:(e,t,n)=>{var o=n(282);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},90:(e,t,n)=>{var o=n(118);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},968:(e,t,n)=>{var o=n(188);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},883:(e,t,n)=>{var o=n(543);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(723);class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.currentIndex=0,this.slidesToShow=1}connectedCallback(){this.render(),this.init()}init(){this.items=this.shadowRoot.querySelectorAll(".carousel-item"),this.totalItems=this.items.length,this.prevButton=this.shadowRoot.querySelector(".prev"),this.nextButton=this.shadowRoot.querySelector(".next"),this.prevButton.addEventListener("click",(()=>this.prev())),this.nextButton.addEventListener("click",(()=>this.next())),this.update()}prev(){this.currentIndex=(this.currentIndex-1+this.totalItems)%this.totalItems,this.update()}next(){this.currentIndex=(this.currentIndex+1)%this.totalItems,this.update()}update(){}render(){this.shadowRoot.innerHTML=`\n      <style>${e}</style>\n      <div class="carousel">\n        <div class="carousel-inner">\n          <slot></slot>\n        </div>\n        <button class="prev">❮</button>\n        <button class="next">❯</button>\n      </div>\n    `}}customElements.define("store-carousel",t);var o=n(63);class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`\n      <style>${o}</style>\n      <div class="carousel-item">\n        <slot></slot>\n      </div>\n    `}}customElements.define("carousel-item",r);var s=n(769),a=n(90);const i={storage:{get:e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},set:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))}},currency:{format:e=>{const t=parseFloat(e);return isNaN(t)?"Invalid price":(Number.isInteger(t)&&(e=t/100),`$${e.toFixed(2)}`)},convert:e=>Math.round(100*parseFloat(e))}};window.Util=i;const d=i,c=new class{constructor(){this.cart=this.loadCart()}buildCart=()=>({item_count:0,items:[],subtotal_price:0,total_price:0});getCart=()=>this.cart;loadCart=()=>d.storage.get("cart")||this.buildCart();saveCart=()=>d.storage.set("cart",this.cart);addItem=e=>{const t=this.cart.items.find((t=>t.sku===e.sku));console.log(t),t?t.quantity+=1:(e.quantity=1,this.cart.items.push(e)),this.updateCart(),this.saveCart()};removeItem=e=>{this.cart.items=this.cart.items.filter((t=>t.sku!==e)),this.updateCart(),this.saveCart()};updateItem=(e,t)=>{const n=this.cart.items.find((t=>t.sku===e));n&&(n.quantity+=t,n.quantity<=0?this.removeItem(e):(this.updateCart(),this.saveCart()))};updateCart=()=>{this.cart.item_count=this.cart.items.reduce(((e,t)=>e+t.quantity),0),this.cart.subtotal_price=this.cart.items.reduce(((e,t)=>e+t.price*t.quantity),0),this.cart.total_price=this.cart.subtotal_price,window.dispatchEvent(new CustomEvent("cart-updated"))}};window.cart=c.cart;const l=c,u=[{name:"Wireless Earbuds",description:"Experience unparalleled sound quality with our high-quality wireless earbuds. Featuring advanced noise cancellation technology and a long-lasting battery life, these earbuds are perfect for music lovers and professionals on the go. With a comfortable, ergonomic design, you can enjoy your favorite tunes or take calls with ease.",price:5999,category:"Electronics",sku:"WLB-001",media:["WLB-001-01.webp","WLB-001-02.webp","WLB-001-03.webp","WLB-001-04.webp"]},{name:"Yoga Mat",description:"Enhance your yoga practice with our durable and eco-friendly yoga mat. Designed for all types of yoga and exercise routines, this mat provides superior grip and cushioning to support your movements. Made from sustainable materials, it ensures both comfort and environmental consciousness during your workout sessions.",price:2999,category:"Fitness",sku:"YM-002",media:["YM-002-01.webp","YM-002-02.webp","YM-002-03.webp","YM-002-04.webp"]},{name:"Kettlebell",description:"Enhance your yoga practice with our durable and eco-friendly yoga mat. Designed for all types of yoga and exercise routines, this mat provides superior grip and cushioning to support your movements. Made from sustainable materials, it ensures both comfort and environmental consciousness during your workout sessions.",price:2999,category:"Fitness",sku:"YM-003",media:["YM-002-01.webp","YM-002-02.webp","YM-002-03.webp","YM-002-04.webp"]},{name:"Coffee Maker",description:"Start your mornings right with our programmable coffee maker. Featuring a 12-cup capacity and a built-in grinder, this coffee maker allows you to enjoy fresh, flavorful coffee at the touch of a button. Its sleek design and easy-to-use interface make it a perfect addition to any kitchen, catering to both coffee enthusiasts and casual drinkers.",price:8999,category:"Home Goods",sku:"CM-003",media:["CM-003-01.webp","CM-003-02.webp","CM-003-03.webp","CM-003-04.webp"]},{name:"Hiking Backpack",description:"Gear up for your outdoor adventures with our lightweight and water-resistant hiking backpack. Featuring multiple compartments and a built-in hydration bladder, this backpack is designed to keep you organized and hydrated on the go. Its robust construction and comfortable fit make it an ideal choice for hikers, campers, and travelers.",price:7999,category:"Outdoors",sku:"HB-004",media:["HB-004-01.webp","HB-004-02.webp","HB-004-03.webp","HB-004-04.webp"]}],p=new class{constructor(){console.log("collections constructor"),this.collections=this.load()||this.init(u),this.save()}init=e=>this.products.addProperties(e).reduce(((e,t)=>{const{category:n,handle:o}=t,r=n.toLowerCase().replace(/\s+/g,"_");return e[r]||(e[r]={}),e[r][o]=t,e}),{});get=()=>(console.log("collections get",this.collections),this.collections);load=()=>(console.log("collections load"),d.storage.get("collections"));save=()=>{d.storage.set("collections",this.collections)};products={get:e=>{if(e)return Object.values(this.collections[e]||{});{const e=[],t=new Set;for(let n in this.collections)for(let o in this.collections[n]){const r=this.collections[n][o];t.has(r.sku)||(t.add(r.sku),e.push(r))}return e}},add:e=>{const t=e.category.toLowerCase().replace(/\s+/g,"_");this.collections[t]||(this.collections[t]={}),this.collections[t][e.name.toLowerCase().replace(/\s+/g,"-")]=e,this.save()},addProperties:e=>e.map(((e,t)=>{const n=e.name.toLowerCase().replace(/\s+/g,"-"),o=`/products/${n}`;return{...e,id:t+1,handle:n,url:o}}))}},h=new class{constructor(){this.collections=p.get()}get=e=>{for(const t in this.collections)for(const n in this.collections[t])if(this.collections[t][n].handle===e)return this.collections[t][n];return null};getRelated=(e,t)=>{const n=this.collections[e.toLowerCase().replace(/\s+/g,"_")];return Object.values(n).filter((e=>e.handle!==t))}};class m extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){const e=this.getAttribute("handle"),t=this.getAttribute("media"),n=this.getAttribute("name"),o=this.getAttribute("price"),r=this.getAttribute("url"),s=h.get(e),i=`http://localhost:9000/assets/products/${e}/${t}`;this.shadowRoot.innerHTML=`\n        <style>${a}</style>\n        <div class="product-item">\n          <img src="${i}" alt="${n}">\n          <a href="${r}"><h3>${n}</h3></a>\n          <p>Price: ${d.currency.format(o)}</p>\n          <button add-to-cart>Quick Add</button>\n        </div>\n      `,this.shadowRoot.querySelector("a").addEventListener("click",(e=>{e.preventDefault(),window.history.pushState({},"",r);const t=new PopStateEvent("popstate");dispatchEvent(t)})),this.shadowRoot.querySelector("[add-to-cart]").addEventListener("click",(()=>{console.log("add to cart",s),l.addItem(s),alert(`${s.name} has been added to the cart.`)}))}}customElements.define("product-item",m);var g=n(733);class f extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`\n        <style>${g}</style>\n        <div class="grid">\n          <slot></slot>\n        </div>\n      `}}customElements.define("store-grid",f);var b=n(661);class y extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`\n        <style>${b}</style>\n        <div class="grid-item">\n          <slot></slot>\n        </div>\n      `}}customElements.define("grid-item",y);class x extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.collections=p.get()}static get observedAttributes(){return["category"]}attributeChangedCallback(e,t,n){"category"===e&&this.render()}connectedCallback(){this.render()}render(){const e=this.getAttribute("category");let t=[];if(e){const n=this.collections[e];t=Object.values(n)}else{const e=new Set;for(let n in this.collections)for(let o in this.collections[n]){const r=this.collections[n][o];e.has(r.sku)||(e.add(r.sku),t.push(r))}}this.shadowRoot.innerHTML=`\n    <style>${s}</style>\n    <store-grid>\n      ${t.map((e=>`\n        <grid-item>\n          <product-item\n            handle="${e.handle}"\n            media="${e.media[0]}"\n            name="${e.name}"\n            price="${e.price}"\n            url="${e.url}"\n          ></product-item>\n        </grid-item>\n      `)).join("")}\n    </store-grid>\n  `}}customElements.define("store-collection",x);var v=n(925);class w extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`\n      <style>${v}</style>\n      <div class="flex-layout">\n        <slot></slot>\n      </div>\n    `}}customElements.define("flex-layout",w);var k=n(900);class $ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`\n      <style>${k}</style>\n      <div class="flex-box">\n        <slot></slot>\n      </div>\n    `}}customElements.define("flex-box",$);var L=n(663);const S=new class{constructor(){this.collections=p.load()}addProduct=e=>{const t=e.category.toLowerCase().replace(/\s+/g,"_");this.collections[t]||(this.collections[t]={}),this.collections[t][e.handle]=e,d.storage.set("collections",this.collections),window.collections=this.collections};generateProps=e=>{const t=e.name.toLowerCase().replace(/\s+/g,"-"),n=`/products/${t}`;e.id=Object.values(this.collections).reduce(((e,t)=>e+Object.keys(t).length),0)+1,e.handle=t,e.url=n};submit=async(e,t)=>{e.preventDefault();const n=t.querySelector("form"),o=new FormData(n),r={},s=[];o.forEach(((e,t)=>{"media"===t?(s.push(e),r.media||(r.media=[]),r.media.length<4&&r.media.push(e.name)):r[t]="price"===t?d.currency.convert(e):e})),this.generateProps(r),console.log("product after props",r),this.addProduct(r),this.uploadImages(r.handle,s),n.reset(),alert("Product added successfully!")};uploadImages=async(e,t)=>{const n=new FormData;n.append("handle",e),t.forEach((e=>{n.append("images",e)}));try{if(!(await fetch("/upload",{method:"POST",body:n})).ok)throw new Error("Image upload failed")}catch(e){console.error(e)}}};class M extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render(),this.addEventListeners()}addEventListeners(){this.shadowRoot.querySelector("form").addEventListener("submit",(e=>{S.submit(e,this.shadowRoot)}))}render(){this.shadowRoot.innerHTML=`\n      <style>${L}</style>\n      <form>\n        <label>Name: <input type="text" name="name" required></label>\n        <label>Description: <textarea name="description" required></textarea></label>\n        <label>Price: <input type="number" name="price" required></label>\n        <label>Category: <input type="text" name="category" required></label>\n        <label>SKU: <input type="text" name="sku" required></label>\n        <label>Images: <input type="file" name="media" accept="image/*" multiple required></label>\n        <button type="submit">Add Product</button>\n      </form>\n    `}}customElements.define("store-form",M);var E=n(842);class C extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render(),this.addEventListeners(),window.addEventListener("cart-updated",this.updateCartCount)}disconnectedCallback(){window.removeEventListener("cart-updated",this.updateCartCount)}addEventListeners=()=>{this.shadowRoot.querySelector("[cart]").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("store-sidedrawer");t&&(t.hasAttribute("open")?t.removeAttribute("open"):t.setAttribute("open",""))}))};updateCartCount=()=>{this.shadowRoot.querySelector("#cart-count").innerText=window.cart.item_count};render(){this.shadowRoot.innerHTML=`\n        <style>${E}</style>\n        <header class="header">\n          <a href="/"><h1>anti-framework shop</h1></a>\n          <nav>\n            <a href="/dashboard">Account</a>\n            <a href="#" cart>Cart (<span id="cart-count">${cart.item_count}</span>)</a>\n          </nav>\n        </header>\n      `}}customElements.define("store-header",C);var _=n(582);class q extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}open(){this.shadowRoot.querySelector(".modal").classList.add("open")}close(){this.shadowRoot.querySelector(".modal").classList.remove("open")}render(){this.shadowRoot.innerHTML=`\n      <style>${_}</style>\n      <div class="modal">\n        <div class="content">\n          <button class="close">Close</button>\n          <slot></slot>\n        </div>\n      </div>\n    `,this.shadowRoot.querySelector(".close").addEventListener("click",(()=>this.close()))}}customElements.define("store-modal",q);var H=n(968);class T extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){const e=window.location.pathname.split("/").pop(),t=h.get(e);if(!t)return void(this.shadowRoot.innerHTML="<p>Product not found</p>");const n=`/assets/products/${t.handle}/${t.media[0]}`,o=t.media.map((e=>`<img src="/assets/products/${t.handle}/${e}" alt="${t.name}">`)).join(""),r=(t.category.toLowerCase(),h.getRelated(t.category,t.handle));this.shadowRoot.innerHTML=`\n      <style>${H}</style>\n      <div class="product">\n        <div class="media-grid" style="width:50%">\n          <store-grid>\n            ${t.media.map((e=>`\n            <grid-item>\n              <img src="/assets/products/${t.handle}/${e}" alt="${t.name}">\n            </grid-item>\n            `)).join("")}\n          </store-grid>\n        </div>\n        <div class="product-details">\n          <h1>${t.name}</h1>\n          <img class="main-image" src="${n}" alt="${t.name}">\n          <p>${t.description}</p>\n          <p>Price: ${d.currency.format(t.price)}</p>\n          <button add-to-cart>Add to Cart</button>\n          ${r.length>0?"\n            <hr>\n            <h2>Related Products</h2>\n          ":""}\n          <store-grid>\n            ${r.map((e=>`\n              <grid-item>\n                <product-item\n                  handle="${e.handle}"\n                  media="${e.media[0]}"\n                  name="${e.name}"\n                  price="${e.price}"\n                  url="${e.url}"\n                ></product-item>\n              </grid-item>\n            `)).join("")}\n          </store-grid>\n        </div>\n      </div>\n    `,this.shadowRoot.querySelector(".media-grid").addEventListener("click",(e=>{if("IMG"===e.target.tagName){const e=document.querySelector("store-modal");e.innerHTML=o,e.open()}})),this.shadowRoot.querySelector("[add-to-cart]").addEventListener("click",(()=>{l.addItem(t),alert(`${t.name} has been added to the cart.`)}))}}customElements.define("store-product",T);var I=n(883);class R extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}updateItem=e=>{console.log("updateItem",e);const t=window.cart.items.find((t=>t.sku===e));console.log("item",t),t&&(this.setAttribute("data",JSON.stringify(t)),this.render())};render(){const e=JSON.parse(this.getAttribute("data")),t=`/assets/products/${e.handle}/${e.media[0]}`;this.shadowRoot.innerHTML=`\n      <style>${I}</style>\n      <li \n        class="cart-item" \n        product-id="${e.id}" \n        product-handle="${e.handle}"\n        product-sku="${e.sku}"\n      >\n        <img src="${t}" alt="${e.name}" class="thumbnail">\n        <div class="info">\n          <div class="header">\n            <span class="name">${e.name}</span>\n            <button class="remove">&times</button>\n          </div>\n          <span class="category">${e.category}</span>\n          <span class="price">${d.currency.format(e.price)}</span>\n          <div class="quantity">\n            <button class="quantity" decrease>-</button>\n            <span>Quantity: ${e.quantity}</span>\n            <button class="quantity" increase>+</button>\n          </div>\n        </div>\n      </li>\n    `,this.shadowRoot.querySelector("[decrease]").addEventListener("click",(()=>{l.updateItem(e.sku,-1),this.updateItem(e.sku)})),this.shadowRoot.querySelector("[increase]").addEventListener("click",(()=>{l.updateItem(e.sku,1),this.updateItem(e.sku)})),this.shadowRoot.querySelector("button.remove").addEventListener("click",(()=>{l.removeItem(e.sku),this.remove()}))}}customElements.define("cart-item",R);class j extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return["open"]}attributeChangedCallback(e,t,n){"open"===e&&this.render()}connectedCallback(){this.render(),window.addEventListener("cart-updated",this.render)}disconnectedCallback(){window.removeEventListener("cart-updated",this.render)}handleClose=()=>{this.removeAttribute("open")};render=()=>{const{items:e,item_count:t,subtotal_price:n,total_price:o}=window.cart;this.shadowRoot.innerHTML=`\n      <style>${I}</style>\n      <div class="sidedrawer ${this.hasAttribute("open")?"open":""}">\n        <h2>Cart</h2>\n        <ul>\n          ${e.map((e=>`\n            <cart-item\n              data='${JSON.stringify(e)}'\n            ></cart-item>\n          `)).join("")}\n        </ul>\n        <hr>\n        <p>Items: ${t}</p>\n        <p>Subtotal: ${d.currency.format(n)}</p>\n        <p>Total: ${d.currency.format(o)}</p>\n      </div>\n      <div class="overlay ${this.hasAttribute("open")?"open":""}" id="overlay"></div>\n    `,this.shadowRoot.querySelectorAll(".close, .overlay").forEach((e=>{e&&e.addEventListener("click",this.handleClose)}))}}customElements.define("store-sidedrawer",j);const A=(e,t)=>{const n=p.get();if("dashboard"===t)e.innerHTML="\n      <flex-layout>\n        <h2>Create a new product</h2>\n      </flex-layout>\n      <flex-layout>\n        <store-form></store-form>\n      </flex-layout>\n      ";else if("product"===t)e.innerHTML="\n        <store-product></store-product>\n      ";else{const t=Object.keys(n).map((e=>`<option value="${e}">${e.replace("_"," ")}</option>`)).join("");e.innerHTML=`\n      <flex-layout>\n        <label for="category-select">filter by category:</label>\n        <select id="category-select">\n          <option value="">All</option>\n          ${t}\n        </select>\n      </flex-layout>\n        \n        <flex-box>\n        <store-collection category=""></store-collection>\n        </flex-box>\n      `;const o=document.getElementById("category-select"),r=document.querySelector("store-collection");o.addEventListener("change",(e=>{r.setAttribute("category",e.target.value)}))}},O=()=>{const e=document.getElementById("app"),t=window.location.pathname;console.log("path",t),"/dashboard"===t?A(e,"dashboard"):t.startsWith("/products/")?A(e,"product"):A(e,"home")};window.addEventListener("popstate",O),document.addEventListener("DOMContentLoaded",(()=>{O(),document.querySelector("store-header").addEventListener("click",(e=>{"A"===e.target.tagName&&(e.preventDefault(),window.history.pushState({},"",e.target.href),O())}))}))})()})();